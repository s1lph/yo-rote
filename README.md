# yo.route ‚Äî –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞

<p align="center">
  <img src="static/img/logo.svg" alt="yo.route Logo" width="180">
</p>

**yo.route** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã VRP (Vehicle Routing Problem) –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Telegram –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—å–µ—Ä–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–º–æ–¥–µ–ª–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [API Reference](#api-reference)
- [Telegram-–±–æ—Ç –¥–ª—è –∫—É—Ä—å–µ—Ä–æ–≤](#telegram-–±–æ—Ç-–¥–ª—è-–∫—É—Ä—å–µ—Ä–æ–≤)
- [–£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã](#—É—Ç–∏–ª–∏—Ç—ã-–∏-—Å–∫—Ä–∏–ø—Ç—ã)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏** | –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞–¥—Ä–µ—Å–æ–≤ |
| **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤** | VRP-–∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –º–µ–∂–¥—É –∫—É—Ä—å–µ—Ä–∞–º–∏ |
| **–ò–º–ø–æ—Ä—Ç –∏–∑ Excel** | –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ –∏–∑ `.xlsx` –∏ `.xls` —Ñ–∞–π–ª–æ–≤ |
| **–¢–æ—á–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–∫–ª–∞–¥–æ–≤/—Ç–æ—á–µ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞–º–∏** | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ |
| **Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | –ú–æ–±–∏–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –≤–æ–¥–∏—Ç–µ–ª—è —Å —Ñ–æ—Ç–æ-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏ |
| **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞** | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–∞ Leaflet.js —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∫—É—Ä—å–µ—Ä–æ–≤ |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | JWT-—Ç–æ–∫–µ–Ω—ã + Google OAuth 2.0 |

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT-—Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ IP-–∞–¥—Ä–µ—Å—É –∫–ª–∏–µ–Ω—Ç–∞
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ Werkzeug
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (multi-tenant)
- Google OAuth 2.0 –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Flask 3.0** | –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **Flask-SQLAlchemy** | ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î |
| **SQLite** | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **OpenRouteService** | –ì–µ–æ–∫–æ–¥–∏–Ω–≥ + VRP –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| **PyJWT** | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã |
| **Authlib** | Google OAuth 2.0 |
| **aiogram 3.x** | Telegram-–±–æ—Ç |

### Frontend
| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Leaflet.js** | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã |
| **Vanilla JavaScript** | –õ–æ–≥–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ |
| **CSS3** | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è (–±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤) |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-repo/yorote.git
cd yorote
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/macOS
source .venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
ORS_API_KEY=your_openrouteservice_api_key
SECRET_KEY=your-secret-key-for-jwt

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///logistics.db

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
FLASK_ENV=development

# Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Telegram-–±–æ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TG_BOT_TOKEN=your_telegram_bot_token
TG_ADMIN_ID=123456789
```

> **–í–∞–∂–Ω–æ:** –ë–µ–∑ `ORS_API_KEY` –≥–µ–æ–∫–æ–¥–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥—É—Ç!
> –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω–∞ [openrouteservice.org](https://openrouteservice.org/dev/#/signup)

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
python app.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000

### 6. –ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
python bot.py
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|------------|----------|--------------|
| `ORS_API_KEY` | API –∫–ª—é—á OpenRouteService –¥–ª—è –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ –∏ VRP | –î–∞ |
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT-—Ç–æ–∫–µ–Ω–æ–≤ | –î–∞ |
| `DATABASE_URL` | URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é SQLite) | –ù–µ—Ç |
| `FLASK_ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ: `development` –∏–ª–∏ `production` | –ù–µ—Ç |
| `GOOGLE_CLIENT_ID` | Client ID –¥–ª—è Google OAuth | –ù–µ—Ç |
| `GOOGLE_CLIENT_SECRET` | Client Secret –¥–ª—è Google OAuth | –ù–µ—Ç |
| `TG_BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ | –ù–µ—Ç |
| `TG_ADMIN_ID` | ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –±–æ—Ç–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) | –ù–µ—Ç |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
yorote/
‚îú‚îÄ‚îÄ app.py              # –ì–ª–∞–≤–Ω–æ–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å REST API
‚îú‚îÄ‚îÄ bot.py              # Telegram-–±–æ—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π (aiogram 3.x)
‚îú‚îÄ‚îÄ models.py           # SQLAlchemy –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ optimizer.py        # –ú–æ–¥—É–ª—å VRP-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îú‚îÄ‚îÄ telegram_utils.py   # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ requirements.txt    # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example        # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ logistics.db        # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ templates/          # HTML-—à–∞–±–ª–æ–Ω—ã (Jinja2)
‚îÇ   ‚îú‚îÄ‚îÄ base.html           # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ login.html          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ registration.html   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ orders.html         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ couriers.html       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ points.html         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ optimization.html   # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ + –∫–∞—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ account.html        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ settings.html       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
‚îÇ
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/            # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ img/            # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏–∫–æ–Ω–∫–∏
‚îÇ
‚îî‚îÄ‚îÄ instance/           # –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
```

---

## –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–ö–æ–º–ø–∞–Ω–∏—è)

```python
class User:
    id: int                 # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    email: str              # Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    password_hash: str      # –•–µ—à –ø–∞—Ä–æ–ª—è
    company_name: str       # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
    activity: str           # –í–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    phone: str              # –¢–µ–ª–µ—Ñ–æ–Ω
    created_at: datetime    # –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
    updated_at: datetime    # –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–ú–µ—Ç–æ–¥—ã:**
- `set_password(password)` ‚Äî –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `check_password(password)` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
- `to_dict()` ‚Äî –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON

---

### Courier (–ö—É—Ä—å–µ—Ä)

```python
class Courier:
    id: int                 # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    user_id: int            # ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–∫–æ–º–ø–∞–Ω–∏–∏)
    full_name: str          # –§–ò–û –∫—É—Ä—å–µ—Ä–∞
    phone: str              # –¢–µ–ª–µ—Ñ–æ–Ω
    telegram: str           # Telegram username
    vehicle_type: str       # –¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (car/truck/bicycle/scooter)
    profile: str            # –ü—Ä–æ—Ñ–∏–ª—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ OpenRouteService
    capacity: int           # –ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å
    start_lat: float        # –ù–∞—á–∞–ª—å–Ω–∞—è —à–∏—Ä–æ—Ç–∞
    start_lon: float        # –ù–∞—á–∞–ª—å–Ω–∞—è –¥–æ–ª–≥–æ—Ç–∞
    auth_code: str          # 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –¥–ª—è Telegram-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    telegram_chat_id: str   # ID —á–∞—Ç–∞ Telegram (–ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
    is_on_shift: bool       # –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –Ω–∞ —Å–º–µ–Ω–µ
    current_lat: float      # –¢–µ–∫—É—â–∞—è —à–∏—Ä–æ—Ç–∞ (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
    current_lon: float      # –¢–µ–∫—É—â–∞—è –¥–æ–ª–≥–æ—Ç–∞ (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
```

**–ú–µ—Ç–æ–¥—ã:**
- `generate_auth_code(force=False)` ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Telegram
- `to_dict()` ‚Äî –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON

---

### Order (–ó–∞–∫–∞–∑)

```python
class Order:
    id: int                 # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    user_id: int            # ID –≤–ª–∞–¥–µ–ª—å—Ü–∞
    order_name: str         # –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
    destination_point: str  # –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
    address: str            # –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏
    lat: float              # –®–∏—Ä–æ—Ç–∞
    lon: float              # –î–æ–ª–≥–æ—Ç–∞
    visit_date: str         # –î–∞—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏—è (YYYY-MM-DD)
    visit_time: str         # –í—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è (HH:MM)
    time_at_point: int      # –í—Ä–µ–º—è –Ω–∞ —Ç–æ—á–∫–µ (–º–∏–Ω—É—Ç—ã)
    recipient_name: str     # –ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    recipient_phone: str    # –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    comment: str            # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
    company: str            # –ö–æ–º–ø–∞–Ω–∏—è-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
    courier_id: int         # ID –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∫—É—Ä—å–µ—Ä–∞
    point_id: int           # ID —Ç–æ—á–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    route_id: int           # ID –º–∞—Ä—à—Ä—É—Ç–∞
    route_position: int     # –ü–æ–∑–∏—Ü–∏—è –≤ –º–∞—Ä—à—Ä—É—Ç–µ
    status: str             # –°—Ç–∞—Ç—É—Å (planned/in_progress/completed/failed)
```

**–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–∞:**
| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `planned` | –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω |
| `in_progress` | –í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–æ—Å—Ç–∞–≤–∫–∏ |
| `completed` | –î–æ—Å—Ç–∞–≤–ª–µ–Ω |
| `failed` | –ù–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω |

---

### Route (–ú–∞—Ä—à—Ä—É—Ç)

```python
class Route:
    id: int             # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    user_id: int        # ID –≤–ª–∞–¥–µ–ª—å—Ü–∞
    courier_id: int     # ID –∫—É—Ä—å–µ—Ä–∞
    name: str           # –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
    date: str           # –î–∞—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∞ (YYYY-MM-DD)
    status: str         # –°—Ç–∞—Ç—É—Å (active/completed)
    geometry: str       # Encoded polyline –≥–µ–æ–º–µ—Ç—Ä–∏–∏
    orders: List[Order] # –ó–∞–∫–∞–∑—ã –≤ –º–∞—Ä—à—Ä—É—Ç–µ
```

---

### Point (–¢–æ—á–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏)

```python
class Point:
    id: int             # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    user_id: int        # ID –≤–ª–∞–¥–µ–ª—å—Ü–∞
    name: str           # –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏
    address: str        # –ê–¥—Ä–µ—Å
    latitude: float     # –®–∏—Ä–æ—Ç–∞
    longitude: float    # –î–æ–ª–≥–æ—Ç–∞
    is_primary: bool    # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞
```

---

## API Reference

–í—Å–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON. –î–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Authorization: Bearer <JWT_TOKEN>
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### POST /api/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "company_name": "–û–û–û –î–æ—Å—Ç–∞–≤–∫–∞",
    "activity": "–ö—É—Ä—å–µ—Ä—Å–∫–∞—è —Å–ª—É–∂–±–∞",
    "email": "admin@delivery.ru",
    "phone": "+79001234567",
    "password": "secure_password",
    "terms": true
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "message": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞",
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": { ... }
}
```

---

#### POST /api/login
–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "email": "admin@delivery.ru",
    "password": "secure_password",
    "remember": true
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "message": "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ",
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": { ... }
}
```

---

#### GET /api/login/google
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Google OAuth 2.0.

---

#### GET /api/user/current
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç JWT).

---

### –ó–∞–∫–∞–∑—ã

#### GET /api/orders
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `page` | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (default: 1) |
| `limit` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (default: 50) |
| `status` | –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É |
| `visit_date` | –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ (YYYY-MM-DD) |
| `search` | –ü–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É/–Ω–∞–∑–≤–∞–Ω–∏—é/–ø–æ–ª—É—á–∞—Ç–µ–ª—é |

---

#### POST /api/orders
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≥–µ–æ–∫–æ–¥–∏–Ω–≥–æ–º.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "order_name": "–ó–∞–∫–∞–∑ #1001",
    "destination_point": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 25, –ú–æ—Å–∫–≤–∞",
    "visit_date": "2024-12-15",
    "visit_time": "14:00",
    "time_at_point": 15,
    "recipient_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "recipient_phone": "+79001112233",
    "comment": "–î–æ–º–æ—Ñ–æ–Ω 25#",
    "point_id": 1,
    "courier_id": null
}
```

---

#### PUT /api/orders/{id}
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞.

---

#### DELETE /api/orders/{id}
–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞.

---

#### DELETE /api/orders/batch
–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "ids": [1, 2, 3, 4, 5]
}
```

---

#### POST /api/orders/import
–ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Excel —Ñ–∞–π–ª–∞.

**Form Data:**
- `file`: Excel-—Ñ–∞–π–ª (.xlsx –∏–ª–∏ .xls)
- `point_id`: ID —Ç–æ—á–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ Excel:**
| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –ù–∞–∑–≤–∞–Ω–∏–µ | –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ |
| –ê–¥—Ä–µ—Å | –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ |
| –î–∞—Ç–∞ | –î–∞—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏—è |
| –í—Ä–µ–º—è | –í—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è |
| –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ | –ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è |
| –¢–µ–ª–µ—Ñ–æ–Ω | –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è |

---

### –ö—É—Ä—å–µ—Ä—ã

#### GET /api/couriers
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫—É—Ä—å–µ—Ä–æ–≤.

---

#### POST /api/couriers
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫—É—Ä—å–µ—Ä–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "full_name": "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤",
    "phone": "+79001234567",
    "telegram": "@petrov",
    "vehicle_type": "car",
    "profile": "driving-car",
    "capacity": 100
}
```

**–¢–∏–ø—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞:**
| –¢–∏–ø | OpenRouteService Profile | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|----------|
| `car` | `driving-car` | –õ–µ–≥–∫–æ–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å |
| `truck` | `driving-hgv` | –ì—Ä—É–∑–æ–≤–∏–∫ |
| `bicycle` | `cycling-regular` | –í–µ–ª–æ—Å–∏–ø–µ–¥ |
| `scooter` | `driving-car` | –°–∫—É—Ç–µ—Ä/–º–æ–ø–µ–¥ |

---

#### PUT /api/couriers/{id}
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞.

---

#### DELETE /api/couriers/{id}
–£–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤).

---

#### POST /api/couriers/{id}/regenerate-code
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Telegram.

---

#### GET /api/couriers/locations
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –≥–µ–æ–ª–æ–∫–∞—Ü–∏–π –∫—É—Ä—å–µ—Ä–æ–≤ –Ω–∞ —Å–º–µ–Ω–µ.

---

### –ú–∞—Ä—à—Ä—É—Ç—ã

#### GET /api/routes
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `date` | –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ (YYYY-MM-DD) |
| `courier_id` | –§–∏–ª—å—Ç—Ä –ø–æ –∫—É—Ä—å–µ—Ä—É |
| `status` | –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É |

---

#### POST /api/routes
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –≤—Ä—É—á–Ω—É—é.

---

#### POST /api/routes/optimize
**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (VRP)**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∑–∞–∫–∞–∑—ã –ø–æ —Ç–æ—á–∫–∞–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ–∂–¥—É –∫—É—Ä—å–µ—Ä–∞–º–∏ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –ø–æ—Å–µ—â–µ–Ω–∏—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "date": "2024-12-15"
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:**
1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –Ω–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
2. –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∑–∞–∫–∞–∑—ã –ø–æ —Ç–æ—á–∫–∞–º –æ—Ç–ø—Ä–∞–≤–∫–∏ (`point_id`)
3. –î–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç VRP-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ OpenRouteService
4. –°–æ–∑–¥–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∑–∞–∫–∞–∑—ã

---

#### GET /api/routes/{id}/optimize-view
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–µ.

**–û—Ç–≤–µ—Ç:**
```json
{
    "route_id": 1,
    "courier": {
        "id": 1,
        "full_name": "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤",
        "start_lat": 55.7558,
        "start_lon": 37.6173
    },
    "depot": {
        "lat": 55.7558,
        "lon": 37.6173,
        "address": "—É–ª. –°–∫–ª–∞–¥—Å–∫–∞—è, 1"
    },
    "orders": [
        {
            "order_id": 1,
            "order_name": "–ó–∞–∫–∞–∑ #1001",
            "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 25",
            "lat": 55.758,
            "lng": 37.615,
            "status": "planned"
        }
    ],
    "path": [
        {"lat": 55.7558, "lng": 37.6173},
        {"lat": 55.758, "lng": 37.615}
    ]
}
```

---

#### POST /api/routes/{id}/edit
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –≤ –º–∞—Ä—à—Ä—É—Ç–µ –≤—Ä—É—á–Ω—É—é.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "orders": [3, 1, 2, 4]
}
```

---

#### POST /api/routes/{id}/send-to-driver
–û—Ç–ø—Ä–∞–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—é –≤ Telegram.

---

### –¢–æ—á–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

#### GET /api/points
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ—á–µ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏.

---

#### POST /api/points
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "name": "–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥",
    "address": "—É–ª. –°–∫–ª–∞–¥—Å–∫–∞—è, 1, –ú–æ—Å–∫–≤–∞",
    "is_primary": true
}
```

---

#### PUT /api/points/{id}
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏.

---

#### DELETE /api/points/{id}
–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏.

---

### –ì–µ–æ–∫–æ–¥–∏–Ω–≥

#### GET /api/geocode/search
–ü–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `q` | –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞) |
| `limit` | –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (default: 8) |

**–û—Ç–≤–µ—Ç:**
```json
{
    "suggestions": [
        {
            "label": "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 1, –ú–æ—Å–∫–≤–∞",
            "lat": 55.7539,
            "lon": 37.6208
        }
    ]
}
```

---

#### POST /api/routes/preview
–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–∞ –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "origin_lat": 55.7558,
    "origin_lon": 37.6173,
    "destination_lat": 55.758,
    "destination_lon": 37.615,
    "profile": "driving-car"
}
```

---

## Telegram-–±–æ—Ç –¥–ª—è –∫—É—Ä—å–µ—Ä–æ–≤

–ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–±–∏–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:

### –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | –í—Ö–æ–¥ –ø–æ 6-–∑–Ω–∞—á–Ω–æ–º—É –∫–æ–¥—É –∏–∑ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ |
| **–ú–æ–∏ –∑–∞–∫–∞–∑—ã** | –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ |
| **–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤** | –û—Ç–º–µ—Ç–∫–∞ ¬´–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ¬ª / ¬´–ù–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ¬ª |
| **–§–æ—Ç–æ-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ |
| **–ù–∞–≤–∏–≥–∞—Ü–∏—è** | Deep-links –≤ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã/2–ì–ò–° |
| **–ó–≤–æ–Ω–æ–∫ –∫–ª–∏–µ–Ω—Ç—É** | –ë—ã—Å—Ç—Ä—ã–π –∑–≤–æ–Ω–æ–∫ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ |
| **–°–º–µ–Ω–∞** | –ù–∞—á–∞–ª–æ/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–π —Å–º–µ–Ω—ã |
| **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è** | –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |

### –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—É—Ä—å–µ—Ä–∞–º –∏ –∑–∞–∫–∞–∑–∞–º |
| **–†–∞—Å—Å—ã–ª–∫–∞** | –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫—É—Ä—å–µ—Ä–∞–º |
| **–¢—Ä–µ–≤–æ–≥–∞** | –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| **–§–æ—Ç–æ-–ø—Ä—É—Ñ—ã** | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã, –≤–≤–æ–¥ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| `/menu` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/orders` | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ |
| `/shift` | –ù–∞—á–∞—Ç—å/–∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–º–µ–Ω—É |
| `/admin` | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) |

### –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞, –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏:

- **–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ** ‚Äî –û—Ç–º–µ—Ç–∏—Ç—å —É—Å–ø–µ—à–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É (—Å –∑–∞–ø—Ä–æ—Å–æ–º —Ñ–æ—Ç–æ)
- **–ù–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ** ‚Äî –£–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –Ω–µ—É–¥–∞—á–∏
- **–ü–æ–∑–≤–æ–Ω–∏—Ç—å** ‚Äî –ó–≤–æ–Ω–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
- **–ù–∞–≤–∏–≥–∞—Ç–æ—Ä** ‚Äî –û—Ç–∫—Ä—ã—Ç—å –∞–¥—Ä–µ—Å –≤ –∫–∞—Ä—Ç–∞—Ö

---

## –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

### optimizer.py ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**

#### `solve_vrp(orders, couriers, depot)`
–†–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É Vehicle Routing Problem.

```python
from optimizer import solve_vrp

routes = solve_vrp(
    orders=[order1, order2, order3],
    couriers=[courier1, courier2],
    depot={'lat': 55.7558, 'lon': 37.6173}
)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
# [
#     {
#         'courier_id': 1,
#         'order_ids': [1, 3, 2],  # –ø–æ—Ä—è–¥–æ–∫ –ø–æ—Å–µ—â–µ–Ω–∏—è
#         'geometry': 'encoded_polyline...',
#         'summary': {'distance': 15000, 'duration': 3600}
#     }
# ]
```

#### `geocode_address(address, country='RU')`
–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

```python
from optimizer import geocode_address

coords = geocode_address("–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, –ú–æ—Å–∫–≤–∞")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: (37.6208, 55.7539) ‚Äî (lon, lat)
```

#### `decode_polyline(encoded)`
–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Google Encoded Polyline.

```python
from optimizer import decode_polyline

path = decode_polyline("_p~iF~ps|U...")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [[55.75, 37.61], [55.76, 37.62], ...]
```

---

### telegram_utils.py ‚Äî Telegram-—É—Ç–∏–ª–∏—Ç—ã

#### `send_route_to_driver(route_id)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç –≤–æ–¥–∏—Ç–µ–ª—é –≤ Telegram —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏.

```python
from telegram_utils import send_route_to_driver

result = send_route_to_driver(route_id=1)
# {'success': True, 'message': '–ú–∞—Ä—à—Ä—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω', 'sent_count': 5}
```

#### `send_telegram_message(chat_id, text, parse_mode='Markdown')`
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram Bot API.

---

### –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π

| –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `update_db_schema.py` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î |
| `migrate_db.py` | –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `migrate_bot_fields.py` | –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π –¥–ª—è Telegram-–±–æ—Ç–∞ |
| `cleanup_db.py` | –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö |

---

## Roadmap

- [x] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT + Google OAuth)
- [x] Telegram-–±–æ—Ç –¥–ª—è –∫—É—Ä—å–µ—Ä–æ–≤
- [x] –ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Excel
- [x] –§–æ—Ç–æ-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∫—É—Ä—å–µ—Ä–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫—É—Ä—å–µ—Ä–æ–≤ (React Native)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM-—Å–∏—Å—Ç–µ–º–∞–º–∏(—ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞, –∫–æ—Ç–æ—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –æ–±—ä–µ–¥–∏–Ω—è—è –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ–¥–∞–∂, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –≤ –µ–¥–∏–Ω–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤, —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –∏ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫–æ–º–ø–∞–Ω–∏–∏ –±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

[![License: CC BY-NC-ND 4.0](https://img.shields.io/badge/License-CC%20BY--NC--ND%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)**.

### –í—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –≤ –ª—é–±–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

### –ü—Ä–∏ —É—Å–ª–æ–≤–∏—è—Ö:
- üìù **–ê—Ç—Ä–∏–±—É—Ü–∏—è** ‚Äî –£–∫–∞–∑–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- üö´ **–ù–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ** ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–æ
- üîí **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Äî –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –∑–∞–ø—Ä–µ—â–µ–Ω–æ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [CC BY-NC-ND 4.0](https://creativecommons.org/licenses/by-nc-nd/4.0/)

---

**–ê–≤—Ç–æ—Ä:** Dmitriy Kutuzov ([@s1lph](https://github.com/s1lph))

---

<p align="center">
  Built with ‚ù§Ô∏è for small business delivery
</p>
